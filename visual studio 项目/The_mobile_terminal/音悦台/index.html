<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="./css/index.css">
    <script src="./js/jquery.js"></script>
    <!-- <script src="./js/index.js"></script> -->
    <script src="./js/myjs.js"></script>
    <script src="./js/swiper.js"></script>
    <style>

    </style>
</head>

<body>
    <div class="app">
        <header class="header">
            <div class="header_1 clearFixed">
                <h1 class="logo"><img src="./img/logo.png" alt=""></h1>
                <div class="channel">
                </div>
                <div class="channelList">
                    <a href="###">首页</a>
                    <a href="###">MV</a>
                    <a href="###">悦单</a>
                    <a href="###">V榜</a>
                    <a href="###">音悦</a>
                    <a href="###">商城</a>
                    <a href="###">节目</a>
                    <a href="###">饭团</a>
                    <a href="###">资讯</a>
                    <a href="###">我的家</a>
                    <a href="###">APP下载</a>
                    <a href="###">热门应用</a>
                </div>
                <div class="log">
                    <a class="search">搜索</a>
                    <a>登录</a>
                    <a>注册</a>
                </div>
            </div>
            <div class="header_2">
                <input type="text" placeholder="请输入搜索的内容..." id="inp">
                <button id="bigsearch">搜索</button>
            </div>
        </header>
        <nav class="nav">
            <div class="nav_1">
                <a href="###" class="show">首页</a>
                <a href="###">MV</a>
                <a href="###">悦单</a>
                <a href="###">V榜</a>
                <a href="###">音悦</a>
                <a href="###">商城</a>
                <a href="###">节目</a>
                <a href="###">饭团</a>
                <a href="###">资讯</a>
                <a href="###">我的家</a>
                <a href="###">APP下载</a>
                <a href="###">热门应用</a>
            </div>

        </nav>
        <div class="content">
            <div class="wrap_content">
                <div class="swiper-wrapper clearFixed">
                    <div class="swiper-slide"><img src="./img/1.jpg" alt=""></div>
                    <div class="swiper-slide"><img src="./img/2.jpg" alt=""></div>
                    <div class="swiper-slide"><img src="./img/3.jpg" alt=""></div>
                    <div class="swiper-slide"><img src="./img/4.jpg" alt=""></div>
                    <div class="swiper-slide"><img src="./img/5.jpg" alt=""></div>
                </div>
                <div class="swiper-pagination">
                </div>
            </div>
            <div class="MV TV">
                <div class="selection">
                    <div class="menu_head">
                        <h3>自媒体精选</h3><span>更多&gt;</span>
                    </div>
                    <div class="place_select">
                        <a href="###">港台</a>
                        <a href="###">内地</a>
                        <a href="###">欧美</a>
                        <a href="###">韩国</a>
                    </div>
                    <div class="select_strip"></div>
                    <div class="menu_videos">
                        <div class="menu_videos_1">
                            <div class="gangtai videos" isloaded="1">
                                <div class="one menu_video">
                                    <div class="video">
                                        <video src="video/你凭什么不努力.mp4" style="display: block" id="s1">
                                            <source src="./video/你凭什么不努力.mp4" />
                                            <source src="./video/你凭什么不努力.ogv" />
                                            <source src="./video/你凭什么不努力.webm" />
                                        </video>
                                    </div>
                                    <p class="p1">你凭什么不努力</p>
                                    <div class="about"><a class="a1"></a><span class="span1">1024</span><a class="a2">
                                        </a><span class="span2">9527</span></div>
                                </div>
                                <div class="two menu_video">
                                    <div class="video">
                                        <video src="video/你凭什么不努力.mp4" style="display: block" id="s1">
                                            <source src="./video/你凭什么不努力.mp4" />
                                            <source src="./video/你凭什么不努力.ogv" />
                                            <source src="./video/你凭什么不努力.webm" />
                                        </video>
                                    </div>
                                    <p class="p1">你凭什么不努力</p>
                                    <div class="about"><a class="a1"></a><span class="span1">1024</span><a class="a2">
                                        </a><span class="span2">9527</span></div>
                                </div>
                                <div class="three menu_video">
                                    <div class="video">
                                        <video src="video/你凭什么不努力.mp4" style="display: block" id="s1">
                                            <source src="./video/你凭什么不努力.mp4" />
                                            <source src="./video/你凭什么不努力.ogv" />
                                            <source src="./video/你凭什么不努力.webm" />
                                        </video>
                                    </div>
                                    <p class="p1">你凭什么不努力</p>
                                    <div class="about"><a class="a1"></a><span class="span1">1024</span><a class="a2">
                                        </a><span class="span2">9527</span></div>
                                </div>
                                <div class="four menu_video">
                                    <div class="video">
                                        <video src="video/你凭什么不努力.mp4" style="display: block" id="s1">
                                            <source src="./video/你凭什么不努力.mp4" />
                                            <source src="./video/你凭什么不努力.ogv" />
                                            <source src="./video/你凭什么不努力.webm" />
                                        </video>
                                    </div>
                                    <p class="p1">你凭什么不努力</p>
                                    <div class="about"><a class="a1"></a><span class="span1">1024</span><a class="a2">
                                        </a><span class="span2">9527</span></div>
                                </div>
                                <div class="five menu_video">
                                    <div class="video">
                                        <video src="video/你凭什么不努力.mp4" style="display: block" id="s1">
                                            <source src="./video/你凭什么不努力.mp4" />
                                            <source src="./video/你凭什么不努力.ogv" />
                                            <source src="./video/你凭什么不努力.webm" />
                                        </video>
                                    </div>
                                    <p class="p1">你凭什么不努力</p>
                                    <div class="about"><a class="a1"></a><span class="span1">1024</span><a class="a2">
                                        </a><span class="span2">9527</span></div>
                                </div>
                                <div class="six menu_video">
                                    <div class="video">
                                        <video src="video/你凭什么不努力.mp4" style="display: block" id="s1">
                                            <source src="./video/你凭什么不努力.mp4" />
                                            <source src="./video/你凭什么不努力.ogv" />
                                            <source src="./video/你凭什么不努力.webm" />
                                        </video>
                                    </div>
                                    <p class="p1">你凭什么不努力</p>
                                    <div class="about"><a class="a1"></a><span class="span1">1024</span><a class="a2">
                                        </a><span class="span2">9527</span></div>
                                </div>
                            </div>
                            <div class="neidi videos" isloaded="0">
                            </div>
                            <div class="oumei videos" isloaded="0">
                            </div>
                            <div class="hanguo videos" isloaded="0">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
        <div class="scroll">
            <div class="slide_block"></div>
        </div>
    </div>
    <script>
        var oApp = document.querySelector(".app");
        var oHeader = oApp.querySelector(".header");
        var oNav = oApp.querySelector(".nav");
        var oChannel = oHeader.querySelector(".header_1 .channel");
        var Picrem = 1080;
        var Scale = 16;
        var flage = true;
        var flages = true;
        var oInp = oHeader.querySelector("#inp");
        var oNav_1 = oNav.querySelector(".nav_1");
        var oA = oNav.querySelectorAll("a");
        var oChanneList = oHeader.querySelector(".channelList");
        var link = document.querySelectorAll('a');
        var oScoll = oApp.querySelector('.scroll');
        var oSlide_block = oScoll.querySelector('.slide_block');
        var oContent = oApp.querySelector('.content');
        var IsStyle = false;
        var index = 0;
        var leave_page_Time = null;
        var oTV = oApp.querySelector(".TV");
        var oMenu_videos = oTV.querySelector(".menu_videos");
        var oGangtai=oMenu_videos.querySelector(".gangtai");
        var oVideos=oMenu_videos.querySelectorAll(".videos");
        // var oTV=oApp.querySelector()
        // 阻止系统默认事件
        document.addEventListener("touchstart", function (e) {
            e.preventDefault();
            $(".header_2 #inp").blur();
        }, {
            passive: false
        })
        //获取a标签的跳转事件
        link.forEach(function (item, index, array) {
            item.addEventListener('touchstart', function (e) {
                var href = item.getAttribute('href');
                location.href = href;
            })
        });
        // 设置html的font-size的值
        document.documentElement.style.fontSize = document.documentElement.clientWidth / 16 + 'px';
        // 频道点击
        oChannel.addEventListener("touchstart", function (e) {
            if (flage) {
                this.style.backgroundPositionY = -120 / Picrem * Scale + "rem";
                oChanneList.style.display = "block";
            } else if (!flage) {
                this.style.backgroundPositionY = 0 + "rem";
                oChanneList.style.display = "none";
            }
            flage = !flage;
        });
        //输入框
        oInp.addEventListener("touchstart", function (e) {
            e.stopPropagation();
            $(".header_2 #inp").focus();
        })
        // nav点击Foreach遍历
        var remove = null;
        oA.forEach(function (item) {
            item.addEventListener("touchend", function () {
                if (remove) {
                    remove = false;
                    return;
                }
                oA.forEach(function (item) {
                    item.className = "";
                    // item.style.color = "";
                })
                // this.style.backgroundColor = "#690";
                this.className = "show";
            });
        })
        // 导航触摸
        oNav_1.addEventListener("touchstart", function (e) {
            this.x = e.changedTouches[0].clientX;
            this.left = transformCSS(oNav_1, "translateX");
            oNav_1.style.transition = "none";
            this.startTime = Date.now();
        })
        // 导航移动
        oNav_1.addEventListener("touchmove", function (e) {
            remove = true;
            this._x = e.changedTouches[0].clientX;
            var disx = this._x - this.x;
            var translateX = this._x - this.x + this.left;
            //橡皮筋
            var minX = -(oNav_1.offsetWidth - oNav.offsetWidth);
            var maxX = 0;
            if (translateX >= maxX) {
                translateX = disx / 3;
            }
            if (translateX <= minX) {
                translateX = minX + disx / 3;
            }
            transformCSS(oNav_1, "translateX", translateX);
        })
        //导航触摸抬起
        oNav_1.addEventListener("touchend", function (e) {
            this.endTime = Date.now();
            var translateX = transformCSS(oNav_1, "translateX");
            this._x = e.changedTouches[0].clientX;
            //边界最小值
            var minX = -(oNav_1.offsetWidth - oNav.offsetWidth);
            //边界最大值
            var maxX = 0;
            //过渡动画
            oNav_1.style.transition = "all 0.3s";
            //惯性运动
            var disTime = this.endTime - this.startTime;
            var disx = this._x - this.x;
            var speed = disx / disTime;
            translateX += speed * 100;
            //判断边界,贝塞尔曲线反弹
            if (translateX >= maxX) {
                translateX = maxX;
                oNav_1.style.transition = "all 0.3s cubic-bezier(0,.7,.27,1.5)";
            }
            if (translateX <= minX) {
                translateX = minX;
                oNav_1.style.transition = "all 0.3s cubic-bezier(0,.7,.27,1.5)";
            }
            transformCSS(oNav_1, "translateX", translateX);
        })
        //调用swiper的方法
        Swiper('.wrap_content', {
            loop: true,
            auto: true,
            time: 2000,
            pagination: true
        });
        // 获取滚动条移动
        document.addEventListener("touchstart", function (e) {
            this.y = e.changedTouches[0].clientY;
            // this.top = transformCSS(oSlide_block, 'translateY');
            oContent.top = transformCSS(oContent, 'translateY');
            this.startTime = Date.now();
            //清除计时器,让滚动条显示
            clearTimeout(leave_page_Time)
            oSlide_block.style.visibility = "visible";
        })
        document.addEventListener("touchmove", function (e) {
            this._y = e.changedTouches[0].clientY;
            var translateY_con = this._y - this.y + oContent.top;
            //橡皮筋
            var disY = this._y - this.y;
            var maxY = 0;
            var minY = -(oApp.clientHeight - document.documentElement.clientHeight);
          
            if (translateY_con >= maxY) {
                translateY_con = disY / 3;
            }
            if (translateY_con <= minY) {
                translateY_con = minY + disY / 3;
            }
            translateY = -translateY_con / oContent.offsetHeight * oApp.offsetHeight;
            transformCSS(oSlide_block, 'translateY', translateY);
            transformCSS(oContent, 'translateY', translateY_con);
        })
        document.addEventListener('touchend', function (e) {
            this._y = e.changedTouches[0].clientY;
            //判断用户手指离开页面的时间
            this.leave_Start_Time = Date.now();
            var leave_Start_Time1 = this.leave_Start_Time;
            leave_page_Time = setTimeout(function () {
                var leave_Start_Time2 = Date.now();
                if (parseInt(leave_Start_Time2 - leave_Start_Time1) >= 3000) {
                    oSlide_block.style.visibility = "hidden";
                }
            }, 3000)
            var translateY_con = transformCSS(oContent, 'translateY');
            IsStyle = false;
            //惯性运动
            var maxY = 0;
            var minY = -(oApp.clientHeight - document.documentElement.clientHeight);
            oSlide_block.style.transition = "all 0.5 ";
            oContent.style.transition = "all 0.5 ";
            if (translateY_con >= maxY) {
                IsStyle = true;
                //回弹
                translateY_con = 0;
                //过渡动画和贝塞尔曲线运动
                oContent.style.transition = "all 0.5 cubic-bezier(0,.7,.27,1.5)";
                oSlide_block.style.transition = "all 0.5 cubic-bezier(0,.7,.27,1.5)";
            }
            if (translateY_con <= minY) {
                IsStyle = true;
                //回弹
                translateY_con = minY;
                //过渡动画和贝塞尔曲线运动
                oContent.style.transition = "all 0.5 cubic-bezier(0,.7,.27,1.5)";
                oSlide_block.style.transition = "all 0.5 cubic-bezier(0,.7,.27,1.5)";
            }
            //判断用户手指停止移动并停留的时间

            if (this.endTime >= 2000) {

                translateY = translateY;
                translateY_con = translateY_con;

            } else if (!IsStyle) {
                this.endTime = Date.now();
                var disTime = this.endTime - this.startTime;
                var disY = this._y - this.y;
                var scale_y = disY / disTime;
                translateY += scale_y * 100;
                translateY_con += scale_y * 100;
            }
            translateY=-translateY_con/oContent.offsetHeight*oApp.offsetHeight;            
            transformCSS(oSlide_block, 'translateY', translateY);
            transformCSS(oContent, 'translateY', translateY_con);

        })
        //获取滚动条的高度
        window.addEventListener("load",function(){
            var h=oApp.clientHeight/oContent.clientHeight*oApp.clientHeight;
            oSlide_block.style.height=h+"px";
        })
        //视频区
        oMenu_videos.addEventListener("touchstart", function (e) {
            this.x = e.changedTouches[0].clientX;
            oMenu_videos.left = transformCSS(oMenu_videos, "translateX");
        })
        oMenu_videos.addEventListener("touchmove", function (e) {
            this._x = e.changedTouches[0].clientX;
            var translateX = this._x - this.x + oMenu_videos.left;
            transformCSS(oMenu_videos, "translateX", translateX);

        })
        oMenu_videos.addEventListener("touchend", function (e) {
            var translateX = transformCSS(oMenu_videos, "translateX");
            this._x = e.changedTouches[0].clientX;
            var disx =Math.abs(this._x - this.x);
            var scale = oTV.clientWidth / 2;
            if (disx >= scale) {
                if (this._x > this.x) {
                    index--;
                }
                if (this._x < this.x) {
                    index++;
                }
            }
            translateX = -oMenu_videos.clientWidth * index;
            transformCSS(oMenu_videos, "translateX", translateX);
        })

       
    </script>
</body>

</html>